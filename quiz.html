<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelola Soal Kuis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #F0F9FF; }
        .form-container { background: white; border-radius: 24px; padding: 32px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05); border: 2px solid #E0E7FF; }
        .input-group { margin-bottom: 20px; }
        .input-field { width: 100%; padding: 12px 16px; border: 2px solid #D1D5DB; border-radius: 12px; transition: all 0.3s ease; }
        .input-field:focus { outline: none; border-color: #60A5FA; box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.3); }
        .label-text { display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; margin-bottom: 8px; }
        .btn-simpan { background: linear-gradient(135deg, #34D399, #10B981); color: white; font-weight: 700; padding: 16px; border-radius: 9999px; width: 100%; border: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(52, 211, 153, 0.4);}
        .btn-simpan:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(52, 211, 153, 0.5);}
        .question-type-fields { display: none; }
        .tombol-beranda { position: fixed; bottom: 20px; right: 20px; background-color: #FFC107; color: #333; padding: 12px 20px; border-radius: 50px; display: flex; align-items: center; gap: 8px; font-family: 'Baloo 2', sans-serif; font-size: 1.1rem; font-weight: 700; text-decoration: none; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); transition: transform 0.2s ease, box-shadow 0.2s ease; z-index: 1000;}
        .tombol-beranda:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);}
    </style>
</head>
<body class="text-gray-800">
    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-10">
            <h1 id="quiz-title-header" class="text-4xl md:text-5xl font-bold text-blue-600">Memuat Kuis... üöÄ</h1>
            <p class="text-gray-500 mt-2">Isi formulir di bawah untuk menambahkan soal baru ke dalam paket kuis ini.</p>
        </header>

        <main id="form-kuis" class="form-container mb-12">
            <h2 class="text-2xl font-bold mb-6 text-gray-700">Detail Soal Baru</h2>
            <form id="quizCreatorForm">
                <div class="input-group">
                    <label for="pertanyaan" class="label-text"><i data-lucide="help-circle"></i>Teks Pertanyaan / Instruksi</label>
                    <textarea id="pertanyaan" rows="3" class="input-field" placeholder="Tuliskan pertanyaan atau instruksi pengerjaan soal..."></textarea>
                </div>
                <div class="input-group">
                    <label for="tipe-soal" class="label-text"><i data-lucide="list-checks"></i>Tipe Soal</label>
                    <select id="tipe-soal" class="input-field bg-white">
                        <option value="pilihan-ganda">1. Pilihan Ganda</option>
                        <option value="esai">2. Esai</option>
                        <option value="susun-huruf">3. Susun Huruf</option>
                        <option value="pencocokkan">4. Pencocokkan</option>
                        <option value="benar-salah">5. Benar atau Salah</option>
                        <option value="susun-kalimat">6. Susun Kata Jadi Kalimat</option>
                        <option value="tts-mini">7. Teka-Teki Silang Mini</option>
                    </select>
                </div>

                <!-- PILIHAN GANDA tetap (hanya alasan per opsi, sudah ada) -->
                <fieldset id="fields-pilihan-ganda" class="question-type-fields space-y-4">
                    <label class="label-text"><i data-lucide="list"></i>Opsi Jawaban & Penjelasan</label>
                    <div id="pg-options-container" class="space-y-4"></div>
                    <button type="button" id="add-pg-option-btn" class="text-sm text-blue-600 font-semibold flex items-center gap-2"><i data-lucide="plus-circle" class="w-4 h-4"></i>Tambah Opsi</button>
                </fieldset>

                <!-- ESAI: 2 alasan -->
                <fieldset id="fields-esai" class="question-type-fields">
                    <div class="input-group">
                        <label for="esai-answer" class="label-text"><i data-lucide="key-round"></i>Kunci Jawaban Esai</label>
                        <textarea id="esai-answer" rows="3" class="input-field" placeholder="Tuliskan acuan jawaban benar untuk esai..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="esai-explanation-right" class="label-text"><i data-lucide="check-circle-2"></i>Alasan jika jawaban sesuai kata kunci (benar)</label>
                        <textarea id="esai-explanation-right" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban sesuai kata kunci..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="esai-explanation-wrong" class="label-text"><i data-lucide="x-circle"></i>Alasan jika jawaban tidak sesuai kata kunci (salah)</label>
                        <textarea id="esai-explanation-wrong" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban tidak sesuai kata kunci..."></textarea>
                    </div>
                </fieldset>

                <!-- SUSUN HURUF: 2 alasan -->
                <fieldset id="fields-susun-huruf" class="question-type-fields space-y-4">
                    <div class="input-group">
                        <label for="susun-huruf-answer" class="label-text"><i data-lucide="key-round"></i>Jawaban (Kata yang Benar)</label>
                        <input type="text" id="susun-huruf-answer" class="input-field" placeholder="Contoh: INDONESIA">
                    </div>
                    <div class="input-group">
                        <label for="susun-huruf-decoys" class="label-text"><i data-lucide="shuffle"></i>Huruf Pengecoh</label>
                        <input type="text" id="susun-huruf-decoys" class="input-field" placeholder="Ketik beberapa huruf tanpa spasi (Contoh: XYZ)">
                    </div>
                    <div class="input-group">
                        <label for="susun-huruf-explanation-right" class="label-text"><i data-lucide="check-circle-2"></i>Alasan jika jawaban benar</label>
                        <textarea id="susun-huruf-explanation-right" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban benar..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="susun-huruf-explanation-wrong" class="label-text"><i data-lucide="x-circle"></i>Alasan jika jawaban salah</label>
                        <textarea id="susun-huruf-explanation-wrong" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban salah..."></textarea>
                    </div>
                </fieldset>

                <!-- PENCOCOKKAN: 2 alasan per pasangan -->
                <fieldset id="fields-pencocokkan" class="question-type-fields space-y-4">
                    <label class="label-text"><i data-lucide="link-2"></i>Pasangan untuk Dicocokkan & Alasan</label>
                    <div id="matching-pairs-container" class="space-y-3"></div>
                    <button type="button" id="add-matching-pair-btn" class="text-sm text-blue-600 font-semibold flex items-center gap-2"><i data-lucide="plus-circle" class="w-4 h-4"></i>Tambah Pasangan</button>
                </fieldset>

                <!-- BENAR SALAH: 2 alasan -->
                <fieldset id="fields-benar-salah" class="question-type-fields space-y-4">
                    <label class="label-text"><i data-lucide="check-circle-2"></i>Pilih Jawaban yang Benar</label>
                    <div class="flex gap-4">
                        <label class="flex flex-col gap-2 p-3 border-2 border-gray-200 rounded-lg has-[:checked]:border-blue-500 has-[:checked]:bg-blue-50">
                            <div class="flex items-center gap-2">
                                <input type="radio" name="bs-answer" value="Benar" class="h-4 w-4 text-blue-600">
                                <span>Benar</span>
                            </div>
                            <textarea id="bs-explanation-right" class="input-field mt-1" rows="2" placeholder="Alasan jika jawaban Benar..."></textarea>
                        </label>
                        <label class="flex flex-col gap-2 p-3 border-2 border-gray-200 rounded-lg has-[:checked]:border-pink-500 has-[:checked]:bg-pink-50">
                            <div class="flex items-center gap-2">
                                <input type="radio" name="bs-answer" value="Salah" class="h-4 w-4 text-pink-600">
                                <span>Salah</span>
                            </div>
                            <textarea id="bs-explanation-wrong" class="input-field mt-1" rows="2" placeholder="Alasan jika jawaban Salah..."></textarea>
                        </label>
                    </div>
                </fieldset>

                <!-- SUSUN KALIMAT: 2 alasan -->
                <fieldset id="fields-susun-kalimat" class="question-type-fields space-y-4">
                    <label class="label-text"><i data-lucide="key-round"></i>Kalimat Jawaban yang Benar</label>
                    <div id="sk-answers-container" class="space-y-3"></div>
                    <button type="button" id="add-sk-answer-btn" class="text-sm text-blue-600 font-semibold flex items-center gap-2"><i data-lucide="plus-circle"></i>Tambah Alternatif Jawaban</button>
                    <div class="input-group">
                        <label for="sk-explanation-right" class="label-text"><i data-lucide="check-circle-2"></i>Alasan jika jawaban benar</label>
                        <textarea id="sk-explanation-right" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban benar..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="sk-explanation-wrong" class="label-text"><i data-lucide="x-circle"></i>Alasan jika jawaban salah</label>
                        <textarea id="sk-explanation-wrong" rows="2" class="input-field" placeholder="Tuliskan alasan jika jawaban salah..."></textarea>
                    </div>
                </fieldset>

                <!-- TTS MINI: 4 alasan -->
                <fieldset id="fields-tts-mini" class="question-type-fields grid md:grid-cols-2 gap-6">
                    <div class="input-group">
                        <label for="tts-mendatar" class="label-text"><i data-lucide="arrow-right"></i>Jawaban Mendatar</label>
                        <input type="text" id="tts-mendatar" class="input-field" placeholder="Contoh: APEL">
                    </div>
                    <div class="input-group">
                        <label for="tts-menurun" class="label-text"><i data-lucide="arrow-down"></i>Jawaban Menurun</label>
                        <input type="text" id="tts-menurun" class="input-field" placeholder="Contoh: EMBUN">
                    </div>
                    <div class="input-group md:col-span-2">
                        <label class="label-text"><i data-lucide="info"></i>Alasan jika Mendatar & Menurun BENAR</label>
                        <textarea id="tts-explanation-both-correct" class="input-field" rows="2" placeholder="Alasan jika keduanya benar..."></textarea>
                    </div>
                    <div class="input-group md:col-span-2">
                        <label class="label-text"><i data-lucide="info"></i>Alasan jika Mendatar & Menurun SALAH</label>
                        <textarea id="tts-explanation-both-wrong" class="input-field" rows="2" placeholder="Alasan jika keduanya salah..."></textarea>
                    </div>
                    <div class="input-group md:col-span-2">
                        <label class="label-text"><i data-lucide="info"></i>Alasan jika Mendatar BENAR & Menurun SALAH</label>
                        <textarea id="tts-explanation-horizontal-correct" class="input-field" rows="2" placeholder="Alasan jika hanya mendatar benar..."></textarea>
                    </div>
                    <div class="input-group md:col-span-2">
                        <label class="label-text"><i data-lucide="info"></i>Alasan jika Mendatar SALAH & Menurun BENAR</label>
                        <textarea id="tts-explanation-vertical-correct" class="input-field" rows="2" placeholder="Alasan jika hanya menurun benar..."></textarea>
                    </div>
                </fieldset>
                <div class="mt-8">
                    <button type="submit" class="btn-simpan flex items-center justify-center gap-2">
                        <i data-lucide="plus-circle"></i>
                        Tambahkan Soal ke Paket
                    </button>
                </div>
            </form>
        </main>
    </div>
    <a href="paket-kuis.html" class="tombol-beranda" title="Kembali ke Manajemen Paket Kuis">
        <span>üè†</span>
        <span>Manajemen Kuis</span>
    </a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        const firebaseConfig = {
            apiKey: "AIzaSyA6zXOerKvdPJTmBp5Y6R2yFsy98xLDsKc",
            authDomain: "forumwidara.firebaseapp.com",
            projectId: "forumwidara",
            storageBucket: "forumwidara.appspot.com",
            messagingSenderId: "216895655168",
            appId: "1:216895655168:web:59255f600fc3b3b44eb7e5"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const urlParams = new URLSearchParams(window.location.search);
        const quizId = urlParams.get('quizId');
        let quizTitle = '';

        const form = document.getElementById('quizCreatorForm');
        const tipeSoalSelect = document.getElementById('tipe-soal');
        const quizTitleHeader = document.getElementById('quiz-title-header');
        const pgContainer = document.getElementById('pg-options-container');
        const matchingContainer = document.getElementById('matching-pairs-container');
        const skContainer = document.getElementById('sk-answers-container');

        if (!quizId) {
            alert("Paket kuis tidak ditemukan! Anda akan diarahkan kembali.");
            window.location.href = 'paket-kuis.html';
        }

        async function fetchQuizData() {
            const quizDocRef = doc(db, 'quizzes', quizId);
            try {
                const docSnap = await getDoc(quizDocRef);
                if (docSnap.exists()) {
                    quizTitle = docSnap.data().title;
                    quizTitleHeader.textContent = `üìù Kelola Soal: ${quizTitle}`;
                } else {
                    quizTitleHeader.textContent = "Paket Kuis Tidak Ditemukan";
                    form.style.display = 'none';
                }
            } catch (error) {
                console.error("Error fetching quiz data: ", error);
                quizTitleHeader.textContent = "Gagal Memuat Kuis";
            }
        }

        function updateFormUI() {
            document.querySelectorAll('.question-type-fields').forEach(field => field.style.display = 'none');
            const activeFieldset = document.getElementById(`fields-${tipeSoalSelect.value}`);
            if (activeFieldset) {
                activeFieldset.style.display = 'block';
            }
        }

        let pgOptionCount = 0;
        function addPgOption(isCorrect = false) {
            if (pgOptionCount >= 5) return;
            pgOptionCount++;
            const div = document.createElement('div');
            div.className = 'p-3 border rounded-lg';
            div.innerHTML = `<div class="flex items-center gap-3 mb-2"><input type="radio" name="pg-correct-option" value="${pgOptionCount}" class="h-5 w-5 text-blue-600" ${isCorrect ? 'checked' : ''}>
            <input type="text" name="pg-option-text" class="input-field" placeholder="Teks opsi jawaban">
            <button type="button" class="remove-pg-option text-red-500 text-xl" title="Hapus Opsi">&times;</button></div>
            <textarea name="pg-option-explanation" class="input-field" rows="2" placeholder="Penjelasan/alasan opsi ini..."></textarea>`;
            pgContainer.appendChild(div);
            div.querySelector('.remove-pg-option').addEventListener('click', () => { div.remove(); pgOptionCount--; });
        }

        let matchingPairCount = 0;
        function addMatchingPair() {
            matchingPairCount++;
            const div = document.createElement('div');
            div.className = 'flex flex-col gap-2 p-3 border rounded-lg';
            div.innerHTML = `
                <div class="flex items-center gap-3">
                    <input type="text" class="input-field" name="matching-prompt" placeholder="Item Kiri ${matchingPairCount}">
                    <span>=</span>
                    <input type="text" class="input-field" name="matching-match" placeholder="Pasangan Kanan ${matchingPairCount}">
                    <button type="button" class="remove-matching-pair text-red-500 text-xl" title="Hapus Pasangan">&times;</button>
                </div>
                <div class="input-group">
                    <label class="label-text"><i data-lucide="check-circle-2"></i>Alasan jika benar</label>
                    <textarea class="input-field" name="matching-explanation-right" rows="2" placeholder="Tuliskan alasan jika pasangan ini benar..."></textarea>
                </div>
                <div class="input-group">
                    <label class="label-text"><i data-lucide="x-circle"></i>Alasan jika salah</label>
                    <textarea class="input-field" name="matching-explanation-wrong" rows="2" placeholder="Tuliskan alasan jika pasangan ini salah..."></textarea>
                </div>
            `;
            matchingContainer.appendChild(div);
            div.querySelector('.remove-matching-pair').addEventListener('click', () => { div.remove(); matchingPairCount--; });
        }

        let skAnswerCount = 0;
        function addSkAnswer() {
            skAnswerCount++;
            const div = document.createElement('div');
            div.className = 'flex items-center gap-3';
            div.innerHTML = `<input type="text" class="input-field" name="sk-answer" placeholder="Alternatif jawaban benar ${skAnswerCount}"><button type="button" class="remove-sk-answer text-red-500 text-xl" title="Hapus">&times;</button>`;
            skContainer.appendChild(div);
            div.querySelector('.remove-sk-answer').addEventListener('click', () => { div.remove(); skAnswerCount--; });
        }

        async function saveQuestion(e) {
            e.preventDefault();
            const questionText = document.getElementById('pertanyaan').value.trim();
            const type = tipeSoalSelect.value;
            if (!questionText) {
                alert('Teks Pertanyaan/Instruksi wajib diisi!');
                return;
            }
            let questionData = { question: questionText, type: type };
            try {
                switch (type) {
                    case 'pilihan-ganda':
                        const options = [];
                        const optionElements = pgContainer.querySelectorAll('div.p-3');
                        const correctRadio = pgContainer.querySelector('input[name="pg-correct-option"]:checked');
                        if (!correctRadio) throw new Error('Pilih salah satu jawaban yang benar!');
                        const correctValue = correctRadio.value;
                        optionElements.forEach((opt) => {
                            const radio = opt.querySelector('input[type="radio"]');
                            const textInput = opt.querySelector('input[name="pg-option-text"]');
                            const explanationInput = opt.querySelector('textarea[name="pg-option-explanation"]');
                            if (textInput.value.trim()) {
                                options.push({
                                    text: textInput.value.trim(),
                                    isCorrect: radio.value === correctValue,
                                    explanation: explanationInput.value.trim() || ''
                                });
                            }
                        });
                        if (options.length < 2) throw new Error('Pilihan ganda harus memiliki minimal 2 opsi.');
                        questionData.options = options;
                        break;
                    case 'esai':
                        const esaiAnswer = document.getElementById('esai-answer').value.trim();
                        const esaiExplanationRight = document.getElementById('esai-explanation-right').value.trim();
                        const esaiExplanationWrong = document.getElementById('esai-explanation-wrong').value.trim();
                        if (!esaiAnswer) throw new Error('Kunci jawaban esai tidak boleh kosong.');
                        questionData.answer = esaiAnswer;
                        questionData.explanation = {
                            right: esaiExplanationRight,
                            wrong: esaiExplanationWrong
                        };
                        break;
                    case 'susun-huruf':
                        const answer = document.getElementById('susun-huruf-answer').value.trim().toUpperCase();
                        if (!answer) throw new Error('Jawaban susun huruf tidak boleh kosong.');
                        const decoysRaw = document.getElementById('susun-huruf-decoys').value.trim().toUpperCase();
                        const susunHurufExplanationRight = document.getElementById('susun-huruf-explanation-right').value.trim();
                        const susunHurufExplanationWrong = document.getElementById('susun-huruf-explanation-wrong').value.trim();
                        questionData.answer = answer;
                        questionData.decoys = [...new Set(decoysRaw.split(''))];
                        questionData.explanation = {
                            right: susunHurufExplanationRight,
                            wrong: susunHurufExplanationWrong
                        };
                        break;
                    case 'pencocokkan':
                        const pairs = [];
                        const pairElements = matchingContainer.querySelectorAll('div.flex.flex-col');
                        pairElements.forEach(pair => {
                            const prompt = pair.querySelector('input[name="matching-prompt"]').value.trim();
                            const match = pair.querySelector('input[name="matching-match"]').value.trim();
                            const expRight = pair.querySelector('textarea[name="matching-explanation-right"]').value.trim();
                            const expWrong = pair.querySelector('textarea[name="matching-explanation-wrong"]').value.trim();
                            if (prompt && match) pairs.push({
                                prompt,
                                match,
                                explanation: {
                                    right: expRight,
                                    wrong: expWrong
                                }
                            });
                        });
                        if (pairs.length < 2) throw new Error('Tipe Pencocokkan butuh minimal 2 pasang.');
                        questionData.matchingPairs = pairs;
                        break;
                    case 'benar-salah':
                        const bsAnswer = document.querySelector('input[name="bs-answer"]:checked');
                        if (!bsAnswer) throw new Error('Pilih jawaban Benar atau Salah!');
                        questionData.answer = bsAnswer.value === 'Benar';
                        questionData.explanation = {
                            right: document.getElementById('bs-explanation-right').value.trim(),
                            wrong: document.getElementById('bs-explanation-wrong').value.trim()
                        };
                        break;
                    case 'susun-kalimat':
                        const correctAnswers = Array.from(skContainer.querySelectorAll('input[name="sk-answer"]')).map(input => input.value.trim()).filter(Boolean);
                        if (correctAnswers.length === 0) throw new Error('Isi setidaknya satu kalimat jawaban!');
                        questionData.correctAnswers = correctAnswers;
                        questionData.words = correctAnswers[0].split(' ');
                        questionData.explanation = {
                            right: document.getElementById('sk-explanation-right').value.trim(),
                            wrong: document.getElementById('sk-explanation-wrong').value.trim()
                        };
                        break;
                    case 'tts-mini':
                        const horizontal = document.getElementById('tts-mendatar').value.trim().toUpperCase();
                        const vertical = document.getElementById('tts-menurun').value.trim().toUpperCase();
                        if (!horizontal || !vertical) throw new Error('Isi jawaban mendatar dan menurun!');
                        if (![...horizontal].some(char => vertical.includes(char))) throw new Error('Jawaban harus memiliki huruf perpotongan.');
                        const expBothCorrect = document.getElementById('tts-explanation-both-correct').value.trim();
                        const expBothWrong = document.getElementById('tts-explanation-both-wrong').value.trim();
                        const expHorizontalCorrect = document.getElementById('tts-explanation-horizontal-correct').value.trim();
                        const expVerticalCorrect = document.getElementById('tts-explanation-vertical-correct').value.trim();
                        questionData.crossword = {
                            horizontal,
                            vertical,
                            explanations: {
                                bothCorrect: expBothCorrect,
                                bothWrong: expBothWrong,
                                horizontalCorrect: expHorizontalCorrect,
                                verticalCorrect: expVerticalCorrect
                            }
                        };
                        break;
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
                return;
            }
            try {
                const questionsSubcollectionRef = collection(db, 'quizzes', quizId, 'questions');
                await addDoc(questionsSubcollectionRef, questionData);
                alert(`Soal berhasil ditambahkan ke paket kuis "${quizTitle}"!`);
                form.reset();
                pgContainer.innerHTML = ''; pgOptionCount = 0; addPgOption(true); addPgOption();
                matchingContainer.innerHTML = ''; matchingPairCount = 0; addMatchingPair(); addMatchingPair();
                skContainer.innerHTML = ''; skAnswerCount = 0; addSkAnswer();
                updateFormUI();
            } catch (error) {
                console.error("Error saving question: ", error);
                alert('Gagal menyimpan soal.');
            }
        }

        tipeSoalSelect.addEventListener('change', updateFormUI);
        form.addEventListener('submit', saveQuestion);
        document.getElementById('add-pg-option-btn').addEventListener('click', () => addPgOption());
        document.getElementById('add-matching-pair-btn').addEventListener('click', addMatchingPair);
        document.getElementById('add-sk-answer-btn').addEventListener('click', addSkAnswer);

        document.addEventListener('DOMContentLoaded', () => {
            fetchQuizData();
            lucide.createIcons();
            addPgOption(true); addPgOption();
            addMatchingPair(); addMatchingPair();
            addSkAnswer();
            updateFormUI();
        });
    </script>
</body>
</html>