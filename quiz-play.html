<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waktunya Kuis! - Komunitas Ceria</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --blue-light: #e3f2fd; --blue-main: #0288d1; --green-correct: #4caf50; --red-wrong: #f44336; --orange-next: #ff9800; --yellow-explanation: #fff9c4; }
        body { font-family: 'Baloo 2', sans-serif; margin: 0; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 15px; box-sizing: border-box; }
        .quiz-container { position: relative; background-color: white; padding: 45px 30px 30px 30px; border-radius: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); width: 100%; max-width: 600px; text-align: center; }
        
        .creator-info { position: absolute; top: 15px; left: 20px; font-size: 0.9rem; font-weight: 700; color: #555; background-color: #f0f0f0; padding: 5px 12px; border-radius: 15px; z-index: 5; }
        .btn-quit-quiz { position: absolute; top: 15px; right: 15px; background-color: #f1f1f1; color: #888; border: 2px solid #ddd; border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; text-decoration: none; font-size: 1.2rem; font-weight: 700; transition: all 0.2s ease; z-index: 10; }
        .btn-quit-quiz:hover { transform: scale(1.1) rotate(90deg); }
        .question-box { background-color: var(--blue-light); padding: 20px; border-radius: 15px; margin-bottom: 25px; min-height: 80px; display: flex; flex-direction: column; justify-content: center; align-items: center; border-left: 8px solid var(--blue-main); }
        
        #media-container { margin-bottom: 15px; width: 100%; }
        #media-container img { max-width: 100%; height: auto; border-radius: 10px; max-height: 300px; }
        #media-container audio { width: 100%; margin-top: 10px; }

        .question-text { font-size: 1.8rem; font-weight: 800; color: var(--blue-main); margin: 0; }
        .answer-options { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .answer-btn, .btn-action-word { border: none; padding: 15px; border-radius: 15px; font-family: 'Baloo 2', sans-serif; font-weight: 700; cursor: pointer; }
        .answer-btn { font-size: 1.5rem; border-bottom: 6px solid; transition: transform 0.1s ease; }
        .answer-btn:active:not(:disabled) { transform: translateY(3px); border-bottom-width: 3px; }
        .answer-btn.correct { background-color: var(--green-correct); color: white; border-color: #388e3c; animation: pulse 0.5s; }
        .answer-btn.wrong { background-color: var(--red-wrong); color: white; border-color: #c62828; }
        .next-btn { margin-top: 15px; background-color: var(--orange-next); color: white; border: none; padding: 15px 40px; font-size: 1.2rem; font-weight: 800; border-radius: 30px; cursor: pointer; visibility: hidden; border-bottom: 4px solid #f57c00; }
        .btn-check { visibility: visible !important; }

        /* Styles for new types */
        .susun-kata-container, .choice-pool { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        .susun-kata-container { min-height: 60px; padding: 10px; background-color: #eee; border-radius: 10px; margin-bottom: 15px; }
        .word-btn { background-color: #81d4fa; color: #01579b; font-size: 1.2rem; border-bottom: 4px solid #29b6f6; padding: 10px 15px;}
        .word-btn.in-answer { background-color: #e0e0e0; border-color: #bdbdbd; }
        
        .pencocokan-grid { display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px 20px; align-items: center; }
        .pencocokan-item { text-align: right; font-weight: 700; font-size: 1.2rem; }
        .pencocokan-select { padding: 10px; font-size: 1rem; border-radius: 8px; border: 2px solid #ccc; }
        
        .multi-benar-label { display: flex; align-items: center; text-align: left; background-color: #f5f5f5; padding: 15px; border-radius: 15px; font-size: 1.2rem; }
        .multi-benar-label input { width: 25px; height: 25px; margin-right: 15px; }

        .feedback-box { min-height: 40px; font-size: 1.6rem; font-weight: 700; margin-top: 15px; }
        .feedback-explanation { font-size: 1rem; font-weight: 400; color: #5f5c3a; margin-top: 10px; background-color: var(--yellow-explanation); padding: 12px; border-radius: 8px; border-left: 5px solid #fbc02d; text-align: left; }
        
        #toast-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px); }
        .toast-message { background: white; padding: 30px 40px; border-radius: 25px; text-align: center; box-shadow: 0 10px 50px rgba(0,0,0,0.2); animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-origin: center; width: 90%; max-width: 500px; }
        .toast-emoji { font-size: 5rem; animation: popIn 0.6s 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) both; }
        .toast-message .btn { padding: 12px; border-radius: 12px; font-weight: 700; text-decoration: none; font-size: 1.1rem; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
        @keyframes scaleIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes popIn { 0% { transform: scale(0); } 70% { transform: scale(1.2); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <div id="quiz-container" class="quiz-container">
        <h2>Menyiapkan sesi...</h2>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, collection, getDocs, query, limit, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const firebaseConfig = {
            // Your Firebase config here
        };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const quizContainer = document.getElementById('quiz-container');
        let allQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        // Sound configuration - Not removed
        const correctSound = new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fcorrect.mp3?alt=media&token=86603384-e91b-4357-8ab6-5593e6c2794c');
        const wrongSound = new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fwrong.mp3?alt=media&token=8d27c95e-1786-455b-800c-d38a83d34d87');
        const resultSounds = {
            genius: new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fyay100.mp3?alt=media&token=b82877a1-2b94-4f4d-82d8-992a6886e927'),
            hebat: new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fwowlebih70.mp3?alt=media&token=161e1b59-2e68-45e3-941f-d23282b017f8'),
            keren: new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fhmm10.mp3?alt=media&token=487d7b32-e053-4ca2-850d-61c0e3535948'),
            belajar: new Audio('https://firebasestorage.googleapis.com/v0/b/forumwidara.appspot.com/o/sound%2Fduh0.mp3?alt=media&token=36098055-680c-4340-9e6b-07b819f6a5f7')
        };
        
        async function fetchQuestions() {
            // Mocking fetch for all question types
            const mockData = [
                { id: '1', dibuatOleh: 'UserA', tipeSoal: 'pilihan_ganda', teksPertanyaan: 'Ibukota Indonesia?', pilihanJawaban: ['Jakarta', 'Bandung', 'Surabaya'], jawabanBenar: [true, false, false], penjelasanPilihan: ['Benar', 'Salah', 'Salah'] },
                { id: '2', dibuatOleh: 'UserB', tipeSoal: 'benar_salah', teksPertanyaan: 'Matahari terbit dari barat.', jawabanBenar: 'salah', penjelasanBS: { benar: 'Penjelasan jika benar', salah: 'Matahari terbit dari timur.' } },
                { id: '3', dibuatOleh: 'UserC', tipeSoal: 'multi_benar', teksPertanyaan: 'Pilih hewan mamalia.', pilihan: [{teks:'Kucing',benar:true},{teks:'Ular',benar:false},{teks:'Paus',benar:true},{teks:'Elang',benar:false}] },
                { id: '4', dibuatOleh: 'UserD', tipeSoal: 'susun_kata', teksPertanyaan: 'Susun kalimat ini.', jawabanBenar: 'saya suka makan nasi' },
                { id: '5', dibuatOleh: 'UserE', tipeSoal: 'pencocokan', teksPertanyaan: 'Cocokkan ibukota negara.', pasangan: [{kiri:'Indonesia',kanan:'Jakarta'}, {kiri:'Jepang',kanan:'Tokyo'},{kiri:'Prancis',kanan:'Paris'}] },
                { id: '6', dibuatOleh: 'UserF', tipeSoal: 'tts_mini', teksPertanyaan: 'Teka-teki silang mini.', jawaban: {mendatar:'BUKU', menurun:'BACA'} },
                { id: '7', dibuatOleh: 'UserG', tipeSoal: 'esai', teksPertanyaan: 'Siapa presiden pertama Indonesia?', jawabanBenar: 'soekarno||ir soekarno', penjelasanEsai: { benar: 'Tepat sekali!', salah: 'Kurang tepat.'} }
            ];
            
            return mockData.map(data => ({
                ...data,
                type: data.tipeSoal,
                question: data.teksPertanyaan,
                creatorName: data.dibuatOleh,
                options: data.pilihanJawaban || (data.pilihan ? data.pilihan.map(p => p.teks) : []),
                correctArray: data.jawabanBenar,
                answer: data.jawabanBenar, // Simplified for some types
                raw: data
            }));
        }
        
        // MAIN FUNCTION TO LOAD A QUESTION
        function loadQuestion() {
            const questionData = allQuestions[currentQuestionIndex];
            
            // Render basic UI
            document.getElementById('creator-info').textContent = `Dibuat oleh: ${questionData.creatorName}`;
            document.getElementById('question-number').textContent = currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = allQuestions.length;
            document.getElementById('score').textContent = score;
            document.getElementById('question-text').textContent = questionData.question;
            document.getElementById('answer-options').innerHTML = '';
            document.getElementById('feedback-box').innerHTML = '';
            document.getElementById('next-btn').style.visibility = 'hidden';

            const mediaContainer = document.getElementById('media-container');
            mediaContainer.innerHTML = '';
            if (questionData.raw.urlGambar) mediaContainer.innerHTML += `<img src="${questionData.raw.urlGambar}" alt="Gambar Soal">`;
            if (questionData.raw.urlSuara) mediaContainer.innerHTML += `<audio controls src="${questionData.raw.urlSuara}"></audio>`;

            // Question Type Router
            const answerOptions = document.getElementById('answer-options');
            switch (questionData.type) {
                case 'pilihan_ganda': renderPilihanGanda(questionData, answerOptions); break;
                case 'benar_salah': renderBenarSalah(questionData, answerOptions); break;
                case 'multi_benar': renderMultiBenar(questionData, answerOptions); break;
                case 'susun_kata': renderSusunKata(questionData, answerOptions); break;
                case 'pencocokan': renderPencocokan(questionData, answerOptions); break;
                case 'tts_mini': renderTtsMini(questionData, answerOptions); break;
                case 'esai': renderEsai(questionData, answerOptions); break;
                default: answerOptions.innerHTML = 'Tipe soal tidak didukung.';
            }
        }

        // --- RENDER FUNCTIONS FOR EACH QUESTION TYPE ---
        function renderPilihanGanda(q, container) {
            const correctIndex = q.correctArray.findIndex(val => val === true);
            const correctAnswer = q.options[correctIndex];
            const shuffled = shuffle([...q.options]);
            shuffled.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = opt;
                btn.onclick = () => {
                    document.querySelectorAll('.answer-btn').forEach(b => b.disabled = true);
                    if (opt === correctAnswer) {
                        btn.classList.add('correct');
                        showFeedback(true, 'Benar!');
                    } else {
                        btn.classList.add('wrong');
                        document.querySelectorAll('.answer-btn').forEach(b => { if(b.textContent === correctAnswer) b.classList.add('correct'); });
                        showFeedback(false, `Salah! Jawaban: ${correctAnswer}`);
                    }
                };
                container.appendChild(btn);
            });
        }
        
        function renderBenarSalah(q, container) {
            ['Benar', 'Salah'].forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = opt;
                btn.onclick = () => {
                    document.querySelectorAll('.answer-btn').forEach(b => b.disabled = true);
                    const isCorrect = opt.toLowerCase() === String(q.answer).toLowerCase();
                    if (isCorrect) {
                        btn.classList.add('correct');
                        showFeedback(true, 'Benar!');
                    } else {
                        btn.classList.add('wrong');
                        document.querySelectorAll('.answer-btn').forEach(b => { if(b.textContent.toLowerCase() === String(q.answer).toLowerCase()) b.classList.add('correct'); });
                        showFeedback(false, `Salah! Jawaban: ${q.answer}`);
                    }
                };
                container.appendChild(btn);
            });
        }

        function renderMultiBenar(q, container) {
            const correctAnswers = q.raw.pilihan.filter(p => p.benar).map(p => p.teks);
            q.options.forEach((opt, idx) => {
                const label = document.createElement('label');
                label.className = 'multi-benar-label';
                label.innerHTML = `<input type="checkbox" data-option="${opt}"> ${opt}`;
                container.appendChild(label);
            });
            const checkBtn = createCheckButton();
            checkBtn.onclick = () => {
                checkBtn.disabled = true;
                const selected = Array.from(container.querySelectorAll('input:checked')).map(i => i.dataset.option);
                let correctSelections = 0;
                let wrongSelections = 0;
                container.querySelectorAll('label').forEach(lbl => {
                    const input = lbl.querySelector('input');
                    const isCorrectAnswer = correctAnswers.includes(input.dataset.option);
                    if (input.checked) {
                        if (isCorrectAnswer) {
                            correctSelections++;
                            lbl.style.backgroundColor = '#d4edda'; // green
                        } else {
                            wrongSelections++;
                            lbl.style.backgroundColor = '#f8d7da'; // red
                        }
                    } else if (isCorrectAnswer) {
                        lbl.style.backgroundColor = '#fff3cd'; // yellow (missed)
                    }
                    input.disabled = true;
                });

                const points = Math.max(0, (correctSelections * 5) - (wrongSelections * 3));
                showFeedback(points > 0, `Kamu mendapat ${points} poin!`, `Jawaban benar: ${correctAnswers.join(', ')}`);
                if (points > 0) score += points; // Add partial score
                else if (isCorrect) score += 10; // Backwards compatibility for showFeedback
            };
            container.appendChild(checkBtn);
        }

        function renderSusunKata(q, container) {
            const words = shuffle(q.answer.split(' '));
            container.innerHTML = `<div class="susun-kata-container" id="susun-answer"></div><div class="choice-pool" id="susun-pool"></div>`;
            const answerContainer = document.getElementById('susun-answer');
            const poolContainer = document.getElementById('susun-pool');
            
            words.forEach(word => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn word-btn';
                btn.textContent = word;
                btn.onclick = () => {
                    if (btn.parentElement === poolContainer) {
                        answerContainer.appendChild(btn);
                    } else {
                        poolContainer.appendChild(btn);
                    }
                };
                poolContainer.appendChild(btn);
            });

            const checkBtn = createCheckButton();
            checkBtn.onclick = () => {
                checkBtn.disabled = true;
                const userAnswer = Array.from(answerContainer.children).map(c => c.textContent).join(' ');
                if (userAnswer === q.answer) {
                    showFeedback(true, 'Susunan Benar!');
                } else {
                    showFeedback(false, `Kurang Tepat! Jawaban: ${q.answer}`);
                }
            };
            container.appendChild(checkBtn);
        }

        function renderPencocokan(q, container) {
            const leftItems = q.raw.pasangan.map(p => p.kiri);
            const rightItems = shuffle(q.raw.pasangan.map(p => p.kanan));
            container.innerHTML = '<div class="pencocokan-grid" id="pencocokan-grid"></div>';
            const grid = document.getElementById('pencocokan-grid');

            leftItems.forEach((left, index) => {
                grid.innerHTML += `<div class="pencocokan-item">${left}</div><div>=</div>`;
                const select = document.createElement('select');
                select.className = 'pencocokan-select';
                select.innerHTML = '<option value="">Pilih...</option>' + rightItems.map(r => `<option value="${r}">${r}</option>`).join('');
                grid.appendChild(select);
            });

            const checkBtn = createCheckButton();
            checkBtn.onclick = () => {
                checkBtn.disabled = true;
                let correctCount = 0;
                grid.querySelectorAll('select').forEach((sel, index) => {
                    const correctAnswer = q.raw.pasangan[index].kanan;
                    if (sel.value === correctAnswer) {
                        correctCount++;
                        sel.style.borderColor = 'var(--green-correct)';
                    } else {
                        sel.style.borderColor = 'var(--red-wrong)';
                    }
                    sel.disabled = true;
                });
                const points = Math.round(10 * (correctCount / leftItems.length));
                showFeedback(points > 0, `Kamu benar ${correctCount} dari ${leftItems.length}!`, `Kamu dapat ${points} poin.`);
                if (points > 0) score += points;
            };
            container.appendChild(checkBtn);
        }
        
        function renderTtsMini(q, container) {
            container.innerHTML = `
                <input type="text" id="tts-mendatar" placeholder="Mendatar..." style="text-align:center;font-size:1.2rem;padding:10px;text-transform:uppercase;">
                <input type="text" id="tts-menurun" placeholder="Menurun..." style="text-align:center;font-size:1.2rem;padding:10px;text-transform:uppercase;">
            `;
            const checkBtn = createCheckButton();
            checkBtn.onclick = () => {
                checkBtn.disabled = true;
                const mendatarInput = document.getElementById('tts-mendatar');
                const menurunInput = document.getElementById('tts-menurun');
                const isMendatarCorrect = mendatarInput.value.toUpperCase() === q.raw.jawaban.mendatar.toUpperCase();
                const isMenurunCorrect = menurunInput.value.toUpperCase() === q.raw.jawaban.menurun.toUpperCase();
                mendatarInput.style.backgroundColor = isMendatarCorrect ? '#d4edda' : '#f8d7da';
                menurunInput.style.backgroundColor = isMenurunCorrect ? '#d4edda' : '#f8d7da';
                if (isMendatarCorrect && isMenurunCorrect) {
                    showFeedback(true, 'Tepat Sekali!');
                } else {
                    showFeedback(false, 'Belum Benar.', `Jawaban: ${q.raw.jawaban.mendatar} & ${q.raw.jawaban.menurun}`);
                }
            };
            container.appendChild(checkBtn);
        }

        function renderEsai(q, container) {
            container.innerHTML = `<textarea id="esai-answer" placeholder="Ketik jawabanmu..." style="width:100%;min-height:80px;font-size:1.2rem;padding:10px;"></textarea>`;
            const checkBtn = createCheckButton();
            checkBtn.onclick = () => {
                checkBtn.disabled = true;
                const userAnswer = document.getElementById('esai-answer').value.toLowerCase();
                const acceptedAnswers = q.answer.toLowerCase().split('||').map(a => a.trim());
                if (acceptedAnswers.some(a => userAnswer.includes(a))) {
                    showFeedback(true, 'Jawabanmu Tepat!');
                } else {
                    showFeedback(false, 'Kurang Tepat.', `Jawaban yang diharapkan: ${acceptedAnswers[0]}`);
                }
            };
            container.appendChild(checkBtn);
        }

        // --- UTILITY & FEEDBACK FUNCTIONS ---
        function createCheckButton() {
            const btn = document.createElement('button');
            btn.id = 'check-btn';
            btn.className = 'next-btn btn-check';
            btn.textContent = 'Periksa Jawaban';
            return btn;
        }

        function showFeedback(isCorrect, message, explanation = "") {
            const feedbackBox = document.getElementById('feedback-box');
            feedbackBox.innerHTML = `<span>${message}</span>`;
            feedbackBox.style.color = isCorrect ? 'var(--green-correct)' : 'var(--red-wrong)';
            if (explanation) {
                feedbackBox.innerHTML += `<div class="feedback-explanation">${explanation}</div>`;
            }

            if (isCorrect) {
                if(score.toString().endsWith('0')) score += 10; // Handle partial points case
                correctSound.play().catch(e => console.warn(e.message));
                document.getElementById('score').textContent = score;
            } else {
                wrongSound.play().catch(e => console.warn(e.message));
            }
            
            document.getElementById('next-btn').style.visibility = 'visible';
            const checkBtn = document.getElementById('check-btn');
            if (checkBtn) checkBtn.style.display = 'none';
        }

        function showResults() {
             const totalQuestions = allQuestions.length;
             const percentage = totalQuestions > 0 ? Math.round((score / (totalQuestions * 10)) * 100) : 0;
             let result = {};
             if (percentage === 100) result = { emoji: '🥳', message: 'JENIUS', sound: resultSounds.genius };
             else if (percentage >= 70) result = { emoji: '🤩', message: 'HEBAT', sound: resultSounds.hebat };
             else if (percentage >= 50) result = { emoji: '🙂', message: 'KEREN', sound: resultSounds.keren };
             else result = { emoji: '🤔', message: 'BELAJAR LAGI YA!', sound: resultSounds.belajar };

             quizContainer.innerHTML = `
                <div class="toast-message" style="position:static;animation:none;">
                    <div class="toast-emoji">${result.emoji}</div>
                    <h2>${result.message}</h2>
                    <p>Skor Akhir:</p>
                    <h1>${score}</h1>
                    <div style="margin-top: 25px; display: grid; gap: 10px;">
                        <a href="${window.location.href}" class="answer-btn" style="background-color:var(--green-correct); color:white; border-color: #388e3c;">Main Lagi</a>
                        <a href="index.html" class="answer-btn" style="background-color:#f1f1f1; border-color:#ddd;">Menu Utama</a>
                    </div>
                </div>`;
             result.sound.play().catch(e => console.warn(e.message));
        }
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- INITIALIZATION ---
        function initializeQuizUI() {
            quizContainer.innerHTML = `
                <a href="index.html" class="btn-quit-quiz">&times;</a>
                <div id="creator-info" class="creator-info"></div>
                <div><p>Pertanyaan <span id="question-number"></span>/<span id="total-questions"></span> | Skor: <span id="score">0</span></p></div>
                <div class="question-box"><div id="media-container"></div><h2 id="question-text" class="question-text"></h2></div>
                <div id="answer-options" class="answer-options"></div>
                <div id="feedback-box" class="feedback-box"></div>
                <button id="next-btn" class="next-btn">Lanjut</button>`;
            document.getElementById('next-btn').addEventListener('click', () => {
                currentQuestionIndex++;
                if (currentQuestionIndex < allQuestions.length) loadQuestion();
                else showResults();
            });
        }

        async function startQuiz() {
            initializeQuizUI();
            try {
                allQuestions = await fetchQuestions(); // Using mocked data
                if (allQuestions.length === 0) {
                    quizContainer.innerHTML = `<h2>Oops! Tidak ada pertanyaan.</h2>`;
                    return;
                }
                allQuestions = shuffle(allQuestions);
                loadQuestion();
            } catch(error) {
                console.error("Failed to load questions:", error);
                quizContainer.innerHTML = '<h2>Error loading quiz.</h2>';
            }
        }
        
        startQuiz();
    </script>
</body>
</html>

